
<div class="topcorner">
  <p>£100</p>
</div>


<h1>*** SPENDING ***</h1>

<h2>Current Balance: £<%= @user.balance %></h2>

<% if (@filtered_by_month_and_tag)%>
  <h2>Spending for <%= @month %> (<%=@tag.name %>): £<%= @transactions_amount %></h2>
<% elsif (@filtered_month_only)%>
  <h2>Spending for <%= @month %>: £<%= @transactions_amount %></h2>
<% elsif @filtered_tag_only%>
  <h2>Total Spending (<%=@tag.name %>): £<%= @transactions_amount %></h2>
<% else %>
  <h2>All Time Spending: £<%= @transactions_amount %></h2>
<% end %>


<div class="container">
  <form action="/transactions/filtered" method="POST">
    <label for="month-select">Month:</label>
    <select name="month_num" id="months">
      <option selected value="0" >All</option>
      <% for month in @months%>
        <% if (@month_num == @months.index(month)+1) %>
          <option selected value=<%= @month_num %>><%= month %></option>
        <% else %>
          <option value=<%= (@months.index(month)+1) %>><%= month %></option>
        <% end %>
      <% end  %>
    </select>

    <label for="tag-select">Tag:</label>
    <select name= "tag_id" id="tags">
      <option selected value="0">All</option>
      <% for tag in @tags%>
        <% if (@tag_id == tag.id) %>
          <option selected value=<%= @tag_id %>><%= tag.name %></option>
        <% else%>
          <option value="<%= tag.id %>"><%= tag.name %></option>
        <% end %>
      <% end %>
    </select>

    <input type="submit" value="filter">

  </form>
</div>


<div class="container">
  <form action="/transactions/filtered/sorted/<%= @month_num %>/<%= @tag_id %>" method="POST">
    <label for="newest">New</label>
    <input type="radio" name="sort_by" value="newest" checked>
    <label for="oldest">Old</label>
    <% if @sort_by == "oldest" %>
      <input type="radio" name="sort_by" value="oldest" checked>
    <% else %>
      <input type="radio" name="sort_by" value="oldest">
    <% end %>
    <input type="submit" value="sort by">
  </form>
</div>



<% for transaction in @transactions %>
  <p>Merchant: <%= transaction.merchant().name %></p>
  <p>Tag: <%= transaction.tag().name%></p>
  <p>Description: <%= transaction.description %></p>
  <p>Amount: <%= transaction.amount %></p>
  <p>Timestamp: <%= transaction.timestamp() %></p>
<% end %>
